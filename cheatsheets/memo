// git quick guide

//config username
git config --global user.name "hosttor"

//config email
git config --global user.email "partners@hosttor.com"

//quick command
git init
git commit -m "Commit Message"
git remote add origin https://github.com/hosttor/git-cheatsheet.git
git push -u origin master

//create bootable usb
lsblk (List all blocks)
sudo umount /dev/sda1 (change to sda1 to proper drive a, b, c, d etc)
sudo dd bs=4M if=/path/to/distro.iso of=/dev/sda && sync (create bootable drive. change */path/to/distro.iso to location of iso image and sda to proper drive a, b, c etc)

//create bootable usb with dd
sudo fdisk -l (list all mounted drive)
sudo umount /dev/sda1 (change sda1 to proper drive a, b, c, d etc)
sudo mkfs.vfat /dev/sda -I (format to single fat32 usb disk which is optional *Change sda1 to proper drive a, b, c, d etc)
sudo dd bs=4M if=/path/to/distro.iso of=/dev/sda && sync (create bootable drive. change */path/to/distro.iso to locatio of iso image and sda to proper drive a, b, c etc)

//command
netstat -an |more, uptime, w, whoami, uname, free, top, ps -ux, ps -aux, fdisk -l

//install gnome3
sudo add-apt-repository ppa:gnome3-team/gnome3
sudo apt-get update;apt-get dist-upgrade
sudo apt-get install gnome-shell gdm gnome-shell-extensions gnome-tweak-tool gnome-contacts gnome-control-center

//reduce overheating
add-apt-repository ppa:linrunner/tlp
apt-get update
apt-get install tlp tlp-rdw
tlp start

//install simple screen recorder
add-apt-repository ppa:maarten-baert/simplescreenrecorder
apt-get update
apt-get install simplescreenrecorder

//setup server
apache2 mysql-server phpmyadmin

//setup ssl
a2enmod ssl
service apache2 restart
a2ensite default-ssl
service apache2 reload
mkdir /etc/apache2/ssl
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/apache2/ssl/apache.key -out /etc/apache2/ssl/apache.crt
chmod 600 /etc/apache2/ssl/*
nano /etc/apache2/sites-enabled/default-ssl.conf 
Note: add ServerName example.com:443 before DocumentRoot
add path for key and crt
SSLCertificateFile     /etc/apache2/ssl/example.org.crt
SSLCertificateKeyFile     /etc/apache2/ssl/example.org.key
service apache2 reload

#test
openssl s_client -connect localhost:443

//restart
/etc/init.d/apache2 restart

//root ssh login
sudo su root
passwd root
nano /etc/ssh/sshd_config Note: Change PermitRootLogin yes, PasswordAuthentication yes
service sshd restart

sudo apt-get -y update
sudo add-apt-repository ppa:ondrej/php
sudo apt-get -y update
sudo apt-get install -y git drush php7.0 libapache2-mod-php7.0 php7.0 php7.0-common php7.0-gd php7.0-mysql php7.0-mcrypt php7.0-curl php7.0-intl php7.0-xsl php7.0-mbstring php7.0-zip php7.0-bcmath php7.0-iconv

##upgrade drush to new version
sudo drush dl drush --destination='/usr/share'

//setup composer
curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer

## fix drupal install php error
sudo apt-get install libapache2-mod-auth-mysql php5-mysql phpmyadmin

//setup upload progress
sudo pecl install uploadprogress //Note Open: /etc/php5/apache2/php.ini and add "extension=uploadprogress.so" //to php.ini

//file manager
bunzip2
gunzip file.tar.gz #remove gz
tar -xvf #remove tar
tar cvzf file.tar.gz file

//create zip file
make zip file: zip -r dir.zip dir

//rsync 
sudo rsync -avzhe ssh user@host:~/url/file ~/Downloads/
sudo rsync -avzhe ssh ~/Downloads/ user@host:~/url/file

//
Edit: sudo nano /etc/apache2/sites-available/000-default.conf
    DocumentRoot /var/www/cloud
 
Edit: sudo nano /etc/apache2/apache2.conf
    <Directory /var/www/cloud/>
      Options Indexes FollowSymLinks
      AllowOverride None ***change to All
      Require all granted
    </Directory>


// Vagrant box settings

//see list if boxes
vagrant box list http://vagrantbox.es

//ubuntu/trusty64 box
ubuntu/trusty64: https://cloud-images.ubuntu.com/vagrant/trusty/current/trusty-server-cloudimg-amd64-vagrant-disk1.box

//add box
vagrant box add ubuntu/trusty64

//remove box 
vagrant box remove {box name} virtual box

//edit vagrant directory on apache2
sudo nano /etc/apache2/sites-enabled/000-default.conf

//change path from /var/www/html to /vagrant
<DocumentRoot /vagrant>


//add this script
 <Directory /vagrant>
     Options -Indexes +FollowSymlinks +MultiViews
     AllowOverride All
     Require all granted
 </Directory>

//MySQL command

//use to login
mysql -u user -p

//create database
CREATE database dbname;

//create user
CREATE user hm@localhost IDENTIFIED BY 'userpw';
 
//grant privileges
GRANT ALL PRIVILEGES ON dbname.* TO hm@localhost IDENTIFIED BY 'userpwm';
FLUSH PRIVILEGES;

//set password
SET PASSWORD FOR ‘root’@’localhost’ = PASSWORD(‘newpass’); #change password for$
 
//change password
UPDATE user SET Password=PASSWORD('newpass') WHERE User='username'; FLUSH PRIVILEGES;

//select all
SELECT * FROM mysql.user;

//delete user
DROP USER 'username'@'localhost'; or DROP USER username;

//delete database
DROP database dbname;

//show database
SHOW databases;

//show tables on database
SHOW tables FROM dbname;

//import database
mysql -u user -p dbname < db.sql Note:import

//backup from local server
mysqldump -u user_name -h localhost -p database_name | gzip -9 > backup_name.sql.gz

//mysql user info
select user();

//mysql more info
show variables;

//mysql port
SHOW VARIABLES WHERE Variable_name = 'port';

//mysql hostname
SHOW VARIABLES WHERE Variable_name = 'hostname';

#ssl
  # Force to open with https 
  RewriteCond %{HTTPS} off [OR]
  RewriteCond %{HTTP_HOST} ^hosttor\.com*
  RewriteRule ^(.*)$ https://www.hosttor.com/$1 [L,R=301]

# force subdomain with https
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} !^(www\.)?hosttor\.com$ [NC]
  RewriteCond %{HTTP_HOST} ^(?:www\.|)(.*)$ [NC]
  RewriteRule ^.*$ https://%1%{REQUEST_URI} [R,L]
  
  #trusted
  $settings['trusted_host_patterns'] = array(
    '^www\.news\.hosttor\.com$',
    '^news\.hosttor\.com$',
);

## hack
node#overlay=admin/appearance/install
admin/config/development/performance#edit-clear-cache

//form

<!-- start crm-block -->

<form action="#" id="Subscribe" method="post" name="Subscribe"><input name="qfKey" type="hidden" value="23b2dae6495a6802ca35a29262f47e02_4673" /> <input name="_qf_default" type="hidden" value="Subscribe:next" /> <input autocomplete="on" class="required" id="email" maxlength="254" name="email" placeholder="Email Address" size="30" type="text" /> <input checked="checked" class="crm-form-checkbox" id="mark_x_5" name="mark_x_5" type="hidden" value="1" /><br />
<input class="btn btn-xs btn-success" crm-icon="fa-check" id="_qf_Subscribe_next-top" name="_qf_Subscribe_next" type="submit" value="Subscribe" />&nbsp;</form>
<!-- end crm-block -->



//emacs configuration file
;; set emacs title
(setq frame-title-format "Hosttor - Website Technologies and IT Consulting")
;; set menu bar
(menu-bar-mode -1)
;; set tool bar
(tool-bar-mode -1)
;; set scroll bar
(scroll-bar-mode -1)
;; set ido mode
(ido-mode)
;; show time
(display-time-mode 1)

;; set package manager
(require 'package)
(add-to-list 'package-archives
             '("melpa" . "https://melpa.org/packages/")
             t)  
(add-to-list 'package-archives
             '("elpa" . "http://elpa.org/packages/")
             t)  
(add-to-list 'package-archives
             '("marmalade" . "http://marmalade-repo.org/packages/")
             t)  
(package-initialize)

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.

 '(org-agenda-files (quote ("~/.libre/.org")))
 ;;'(package-archives (quote (("gnum" . "https://melpa.org/packages/") ("gnu" . "http://elpa.gnu.org/packages/"))))
 '(pop3-authentication-scheme (quote pass))
 '(pop3-leave-mail-on-server nil)
 '(pop3-maildrop "hosttor.com")
 '(pop3-password-required t))
(setq shell-command-switch "-ic")
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:inherit nil :stipple nil :background "black" :foreground "green" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight bold :height 90 :width normal :foundry "unknown" :family "DejaVu Sans Mono"))))
 '(cursor ((t (:background "gold"))))
 '(highlight ((t (:background "blue"))))
 '(isearch ((t (:background "black" :foreground "green"))))
 '(link ((t (:foreground "gold" :underline t))))
 '(link-visited ((t (:inherit link :foreground "magenta")))))
 
 
 //to save buffer
(defun save-all-buffers ()
"Unconditionally save all modified buffers."
(interactive)
(save-some-buffers 1)
(message "All buffers saved"))
(add-hook 'focus-out-hook 'save-all-buffers)
